{{ import('css','header.css','ext.widgets.views') }}

<script type="text/javascript">
headerWidget =
{
    contPos: false,
    prevCeils: 5,           // Предыдущее значение отображаемых ячеек
    cityBlockWidth: 0,
    socialBlockWidth: 0,

    init: function()
    {
        var self = this;
        self.contPos = $('#js-header-cont-pos');
        self.cityBlockWidth = $('#city-block').width();
        self.socialBlockWidth = $('#social-block').width();

        self.contPos.css({
            'width': (app.gridWidth*5)+'px',
            'margin-left': '-'+Math.floor(app.gridWidth*5/2)+'px'
        })

        app.addListener(app.eventReposition, headerWidget.onResize);
        app.resize();
    },

    onResize: function( ev )
    {
        var ceils = ev.ceils;

        if (ceils == 4)
        {
            app.resizeElement( $('#city-block'), headerWidget.cityBlockWidth/2, true );
            app.resizeElement( $('#social-block'), headerWidget.socialBlockWidth/2, true );
        }
        else if (ceils == 5)
        {
            app.resizeElement( $('#city-block'), headerWidget.cityBlockWidth, true );
            app.resizeElement( $('#social-block'), headerWidget.socialBlockWidth, true );
        }
        app.resizeElement( headerWidget.contPos, app.gridWidth * ceils );
    }
};
$(document).ready( function()
{
    headerWidget.init();
});
</script>

<div class='header-widget'>
    <div id='js-header-cont-pos' class='header-cont-pos'>
        <div class='header-cont'>

            <div id='menu-block'>
                {{ widget('ext.widgets.MainMenuWidget') }}
            </div>
            <div id='logo-block'>
                <a href='/'><img src='/img/logo.png' width="185" height="30"></a>
            </div>
            <div id='contacts-block'>
                <a class='contact-mail' href=''>info@sphereart.ru</a>
                <div class='contact-phone semibold'>+7 961 763 07 99</div>
            </div>
            <div id='city-block'>
                {{ widget('ext.widgets.CityWidget') }}
            </div>
            <div id='social-block'>
                {{ widget('ext.widgets.SocialButtonsWidget') }}
            </div>

        </div>
    </div>
</div>
